import{_ as P,u as U,r as F,f as R,a as t,o as E,c as q,d as r,w as o,b as i,l as p,m as C,p as B,s as N,e as m,E as f}from"./index-3f0eb617.js";import{u as z}from"./userStore-d1542a98.js";const A={class:"register-container"},S={class:"login-link"},Z={__name:"RegisterView",setup($){const _=U(),c=z(),d=F(null),s=R({username:"",email:"",password:"",confirmPassword:"",agreement:!1}),w={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在 3 到 20 个字符",trigger:"blur"},{pattern:/^[a-zA-Z0-9_]*$/,message:"用户名只能包含字母、数字和下划线",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:30,message:"密码长度在 6 到 30 个字符",trigger:"blur"},{pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).+$/,message:"密码必须包含大小写字母和数字",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(u,e,l)=>{e!==s.password?l(new Error("两次输入的密码不一致")):l()},trigger:"blur"}],agreement:[{validator:(u,e,l)=>{e?l():l(new Error("请阅读并同意用户协议和隐私政策"))},trigger:"change"}]},V=async()=>{await d.value.validate(async u=>{if(u)try{const e={id:Date.now(),username:s.username,email:s.email,avatar:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"};c.login(e),f.success("注册成功！"),_.push("/forum")}catch(e){f.error("注册失败，请重试"),console.error("注册失败:",e)}})},b=()=>{d.value.resetFields()};return(u,e)=>{const l=t("el-input"),n=t("el-form-item"),x=t("el-checkbox"),g=t("el-button"),k=t("router-link"),v=t("el-form"),y=t("el-card");return E(),q("div",A,[r(y,{class:"register-card"},{header:o(()=>e[5]||(e[5]=[i("h2",{class:"register-title"},"用户注册",-1)])),default:o(()=>[r(v,{model:s,rules:w,ref_key:"registerFormRef",ref:d,"label-width":"100px",class:"register-form"},{default:o(()=>[r(n,{label:"用户名",prop:"username"},{default:o(()=>[r(l,{modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=a=>s.username=a),placeholder:"请输入用户名","prefix-icon":p(C)},null,8,["modelValue","prefix-icon"])]),_:1}),r(n,{label:"邮箱",prop:"email"},{default:o(()=>[r(l,{modelValue:s.email,"onUpdate:modelValue":e[1]||(e[1]=a=>s.email=a),type:"email",placeholder:"请输入邮箱","prefix-icon":p(B)},null,8,["modelValue","prefix-icon"])]),_:1}),r(n,{label:"密码",prop:"password"},{default:o(()=>[r(l,{modelValue:s.password,"onUpdate:modelValue":e[2]||(e[2]=a=>s.password=a),type:"password",placeholder:"请输入密码","prefix-icon":p(N),"show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),r(n,{label:"确认密码",prop:"confirmPassword"},{default:o(()=>[r(l,{modelValue:s.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=a=>s.confirmPassword=a),type:"password",placeholder:"请确认密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),r(n,{prop:"agreement"},{default:o(()=>[r(x,{modelValue:s.agreement,"onUpdate:modelValue":e[4]||(e[4]=a=>s.agreement=a)},{default:o(()=>e[6]||(e[6]=[m(" 我已阅读并同意",-1),i("a",{href:"#",class:"agreement-link"},"用户协议",-1),m("和",-1),i("a",{href:"#",class:"agreement-link"},"隐私政策",-1)])),_:1,__:[6]},8,["modelValue"])]),_:1}),r(n,null,{default:o(()=>[r(g,{type:"primary",onClick:V,class:"register-button"},{default:o(()=>e[7]||(e[7]=[m("注册",-1)])),_:1,__:[7]}),r(g,{onClick:b},{default:o(()=>e[8]||(e[8]=[m("重置",-1)])),_:1,__:[8]})]),_:1}),i("div",S,[e[10]||(e[10]=i("span",null,"已有账号？",-1)),r(k,{to:"/login",class:"link"},{default:o(()=>e[9]||(e[9]=[m("立即登录",-1)])),_:1,__:[9]})])]),_:1},8,["model"])]),_:1})])}}},T=P(Z,[["__scopeId","data-v-de87540f"]]);export{T as default};
