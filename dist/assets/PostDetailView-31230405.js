import{_ as j,g as q,u as U,r as h,h as z,a as l,o as c,c as d,i as p,w as o,b as e,d as t,F as V,j as C,k as D,E as P,t as a,l as g,m as A,e as u,n as G,p as H}from"./index-3f0eb617.js";import{u as J}from"./postStore-4a6fcb29.js";const K={class:"post-detail-container"},O={class:"post-header"},Q={class:"post-title"},W={class:"post-meta"},X={class:"post-author"},Y={class:"post-date"},Z={class:"post-comments"},$={class:"post-tags"},tt={class:"post-content"},et={class:"post-actions"},st={key:2,class:"comments-section"},ot={class:"comments-list"},nt={class:"comment-header"},at={class:"comment-author"},lt={class:"comment-time"},ct={class:"comment-content"},it={key:0},ut={__name:"PostDetailView",setup(rt){const y=q(),B=U(),b=J(),s=h(null),k=h(null),_=h({content:""}),F={content:[{required:!0,message:"请输入评论内容",trigger:"blur"},{min:3,message:"评论内容不能少于3个字符",trigger:"blur"}]},L=r=>({frontend:"前端开发",backend:"后端开发",mobile:"移动开发",ai:"人工智能",cloud:"云计算",database:"数据库",interview:"面试经验",career:"职场交流"})[r]||r,R=()=>{const r=y.params.id;s.value=b.getPostById(r),s.value||(P.warning("未找到该帖子"),B.push("/forum"))},S=async()=>{await k.value.validate(async r=>{if(r){const n={author:"当前用户",content:_.value.content,time:new Date().toLocaleString()};b.addComment(y.params.id,n),_.value.content="",P.success("评论成功！")}})};return z(()=>{R()}),(r,n)=>{const f=l("el-icon"),E=l("el-tag"),m=l("el-button"),v=l("el-card"),w=l("el-empty"),M=l("el-divider"),N=l("el-input"),x=l("el-form-item"),I=l("el-form");return c(),d("div",K,[s.value?(c(),p(v,{key:0,class:"post-detail-card"},{default:o(()=>[e("div",O,[e("h1",Q,a(s.value.title),1),e("div",W,[e("span",X,[t(f,null,{default:o(()=>[t(g(A))]),_:1}),u(" "+a(s.value.author),1)]),e("span",Y,[t(f,null,{default:o(()=>[t(g(G))]),_:1}),u(" "+a(s.value.date),1)]),e("span",Z,[t(f,null,{default:o(()=>[t(g(H))]),_:1}),u(" "+a(s.value.comments)+" 评论",1)]),e("div",$,[(c(!0),d(V,null,C(s.value.tags,i=>(c(),p(E,{key:i,class:"tag-item"},{default:o(()=>[u(a(L(i)),1)]),_:2},1024))),128))])])]),e("div",tt,[e("p",null,a(s.value.content),1)]),e("div",et,[t(m,{type:"text",icon:"Thumb",class:"action-button"},{default:o(()=>[u("点赞 ("+a(s.value.likes||0)+")",1)]),_:1}),t(m,{type:"text",icon:"Share",class:"action-button"},{default:o(()=>n[1]||(n[1]=[u("分享",-1)])),_:1,__:[1]}),t(m,{type:"text",icon:"Edit",class:"action-button"},{default:o(()=>n[2]||(n[2]=[u("编辑",-1)])),_:1,__:[2]})])]),_:1})):(c(),p(w,{key:1,description:"帖子不存在或已被删除"})),s.value?(c(),d("div",st,[n[4]||(n[4]=e("h3",null,"评论区",-1)),t(M),t(v,{class:"comment-form-card"},{default:o(()=>[t(I,{model:_.value,rules:F,ref_key:"commentFormRef",ref:k,class:"comment-form"},{default:o(()=>[t(x,{prop:"content"},{default:o(()=>[t(N,{modelValue:_.value.content,"onUpdate:modelValue":n[0]||(n[0]=i=>_.value.content=i),type:"textarea",rows:"3",placeholder:"写下你的评论..."},null,8,["modelValue"])]),_:1}),t(x,null,{default:o(()=>[t(m,{type:"primary",onClick:S},{default:o(()=>n[3]||(n[3]=[u("提交评论",-1)])),_:1,__:[3]})]),_:1})]),_:1},8,["model"])]),_:1}),e("div",ot,[(c(!0),d(V,null,C(s.value.commentsList||[],(i,T)=>(c(),p(v,{key:T,class:"comment-item-card"},{default:o(()=>[e("div",nt,[e("span",at,a(i.author),1),e("span",lt,a(i.time),1)]),e("div",ct,a(i.content),1)]),_:2},1024))),128)),s.value.commentsList&&s.value.commentsList.length?D("",!0):(c(),d("div",it,[t(w,{description:"暂无评论，快来抢沙发！"})]))])])):D("",!0)])}}},mt=j(ut,[["__scopeId","data-v-353b0879"]]);export{mt as default};
