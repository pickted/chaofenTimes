import{_ as k,u as C,r as F,f as P,a as s,o as B,c as q,d as e,w as o,b as E,e as c,E as p}from"./index-3f0eb617.js";import{u as N}from"./postStore-4a6fcb29.js";const R={class:"create-post-container"},S={__name:"CreatePostView",setup(U){const m=C(),f=N(),u=F(null),l=P({title:"",content:"",tags:[]}),g={title:[{required:!0,message:"请输入帖子标题",trigger:"blur"},{min:5,max:100,message:"标题长度在 5 到 100 个字符",trigger:"blur"}],content:[{required:!0,message:"请输入帖子内容",trigger:"blur"},{min:20,message:"内容长度不能少于 20 个字符",trigger:"blur"}],tags:[{required:!0,message:"请选择至少一个标签",trigger:"change"}]},b=async()=>{await u.value.validate(async i=>{if(i)try{const t={id:Date.now(),title:l.title,content:l.content,tags:l.tags,author:"当前用户",date:new Date().toLocaleString(),comments:0};f.addPost(t),p.success("帖子发布成功！"),m.push("/forum")}catch(t){p.error("帖子发布失败，请重试"),console.error("发布失败:",t)}})},v=()=>{u.value.resetFields()},V=()=>{m.go(-1)};return(i,t)=>{const _=s("el-input"),n=s("el-form-item"),a=s("el-option"),w=s("el-select"),d=s("el-button"),x=s("el-form"),y=s("el-card");return B(),q("div",R,[e(y,{class:"create-post-card"},{header:o(()=>t[3]||(t[3]=[E("h2",null,"发布新帖",-1)])),default:o(()=>[e(x,{model:l,rules:g,ref_key:"postFormRef",ref:u,"label-width":"80px",class:"post-form"},{default:o(()=>[e(n,{label:"标题",prop:"title"},{default:o(()=>[e(_,{modelValue:l.title,"onUpdate:modelValue":t[0]||(t[0]=r=>l.title=r),placeholder:"请输入帖子标题"},null,8,["modelValue"])]),_:1}),e(n,{label:"内容",prop:"content"},{default:o(()=>[e(_,{modelValue:l.content,"onUpdate:modelValue":t[1]||(t[1]=r=>l.content=r),type:"textarea",rows:"10",placeholder:"请输入帖子内容"},null,8,["modelValue"])]),_:1}),e(n,{label:"标签",prop:"tags"},{default:o(()=>[e(w,{modelValue:l.tags,"onUpdate:modelValue":t[2]||(t[2]=r=>l.tags=r),multiple:"",placeholder:"请选择标签"},{default:o(()=>[e(a,{label:"前端开发",value:"frontend"}),e(a,{label:"后端开发",value:"backend"}),e(a,{label:"移动开发",value:"mobile"}),e(a,{label:"人工智能",value:"ai"}),e(a,{label:"云计算",value:"cloud"}),e(a,{label:"数据库",value:"database"}),e(a,{label:"面试经验",value:"interview"}),e(a,{label:"职场交流",value:"career"})]),_:1},8,["modelValue"])]),_:1}),e(n,null,{default:o(()=>[e(d,{type:"primary",onClick:b},{default:o(()=>t[4]||(t[4]=[c("发布帖子",-1)])),_:1,__:[4]}),e(d,{onClick:v},{default:o(()=>t[5]||(t[5]=[c("重置",-1)])),_:1,__:[5]}),e(d,{onClick:V},{default:o(()=>t[6]||(t[6]=[c("取消",-1)])),_:1,__:[6]})]),_:1})]),_:1},8,["model"])]),_:1})])}}},L=k(S,[["__scopeId","data-v-ec9e9d6e"]]);export{L as default};
